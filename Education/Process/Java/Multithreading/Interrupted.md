Чтобы корректно завершать потоки, следует проверять состояние прерывания:

- **Метод `interrupt()`** устанавливает флаг прерывания.
- **Методы `isInterrupted()` и `Thread.interrupted()`** позволяют узнать, был ли поток прерван (второй сбрасывает флаг).
![](Pasted%20image%2020250223121304.png)

**InterruptedExeption**
При вызове методов, таких как sleep(), wait() или join(), если другой поток вызвал interrupt() на этом потоке, то метод выбрасывает InterruptedException. Это сигнализирует о том, что кто-то запросил прерывание выполнения текущей задачи.
**Флаг прерывания** – это внутреннее булево значение, которое указывает, что для потока был вызван метод interrupt(). Когда поток получает этот сигнал, его прерывание считается зафиксированным, и многие методы (например, sleep()) проверяют этот флаг и, если он установлен, выбрасывают InterruptedException. При этом флаг сбрасывается (становится false).

Чтобы не потерять информацию о том, что прерывание было запрошено, часто в блоке catch мы вызываем:

`Thread.currentThread().interrupt();`

Это восстанавливает (устанавливает обратно) флаг прерывания, позволяя коду выше (или в вызывающем методе) корректно отреагировать на прерывание. Таким образом, если вы ловите InterruptedException, это не значит, что сигнал прерывания уже больше не актуален – его можно «передать дальше» для правильного завершения работы потока.

Таким образом:

*Если в теле цикла вы вызываете метод, который может выбросить InterruptedException (например, Thread.sleep()), то при выбрасывании этого исключения JVM автоматически сбрасывает флаг прерывания. Если вы не восстановите этот флаг, то внешний цикл может не заметить, что прерывание было запрошено, и продолжить выполнение.*

- **InterruptedException** реагирует на прерывание блокирующих операций (sleep, wait, join), вызванное методом interrupt().
- **Thread.currentThread().interrupt()** в блоке catch используется для восстановления флага прерывания, поскольку сам InterruptedException его сбрасывает.
- **Флаг прерывания** – это индикатор, который позволяет определить, что для потока было запрошено его прерывание.
Пример:
![](Pasted%20image%2020250223121631.png)
Правильный пример:
![](Pasted%20image%2020250223121708.png)
### Зачем это нужно?

Передача сигнала дальше (восстановление флага) важна для двух основных целей:

1. **Корректное завершение работы:** Если ваша логика зависит от проверки флага прерывания (например, цикл while), то сброс флага помешает корректно завершить выполнение. Восстанавливая его, вы позволяете внешнему коду увидеть, что поток должен остановиться.
    
2. **Проксирование сигнала:** Если метод, в котором происходит ловля InterruptedException, является частью более крупной задачи, возможно, вызывающий код также должен знать, что прерывание произошло, чтобы, например, корректно освободить ресурсы или завершить операцию.
    

Таким образом, вызов Thread.currentThread().interrupt() в блоке catch позволяет «прокинуть» информацию о прерывании дальше, чтобы другие части программы смогли адекватно отреагировать на этот сигнал.
